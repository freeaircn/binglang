(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09c338bf"],{"139b":function(t,e,a){},"2f21":function(t,e,a){"use strict";var r=a("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,a){"use strict";var r=a("5ca1"),o=a("d8e8"),i=a("4bf8"),n=a("79e5"),l=[].sort,s=[1,2,3];r(r.P+r.F*(n((function(){s.sort(void 0)}))||!n((function(){s.sort(null)}))||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),o(t))}})},"662e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"head-container"},[a("SearchOptions",{attrs:{inputs:t.searchOptionsInputs,rules:t.searchOptionsRules},on:{"click-search":t.handleSearch,change:t.searchChange}}),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:t.preCreate}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:t.buildMenu}},[t._v("Build Menu")])],1),t._v(" "),a("el-divider",[a("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"default-expand-all":!0,"row-key":"id",size:"small","header-cell-style":{background:"#F2F6FC",color:"#606266"}}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"125px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"path",label:"url路径"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"组件名"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"component",label:"组件路径"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"redirect",label:"重定向"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hidden",label:"侧边可见",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.hidden?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"alwaysShow",label:"顶级可见",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.alwaysShow?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"noCache",label:"页面缓存",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.noCache?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"breadcrumb",label:"面包屑",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.breadcrumb?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"roles",label:"权限标识"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"更新日期",width:"135px"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.preUpdate(r.id)}}}),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.doDelete(r.id)}}})]}}])})],1),t._v(" "),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.dialogVisible,title:t.dialogActionMap[t.dialogAction],width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("菜单")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("按钮")])],1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"所属",prop:"pid"}},[a("TreeSelectE",{attrs:{value:t.formData.pid,options:t.treeData,props:{children:"children",label:"title"},placeholder:"选择标题级别"},on:{"update:value":function(e){return t.$set(t.formData,"pid",e)}}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{m:"",label:"标题",prop:"title"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"序号",prop:"sort"}},[a("el-input-number",{model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},["1"===t.formData.type?a("el-form-item",{attrs:{label:"url路径",prop:"path"}},[a("el-input",{attrs:{placeholder:"路由地址"},model:{value:t.formData.path,callback:function(e){t.$set(t.formData,"path",e)},expression:"formData.path"}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"重定向",prop:"redirect"}},[a("el-input",{attrs:{placeholder:"重定向地址"},model:{value:t.formData.redirect,callback:function(e){t.$set(t.formData,"redirect",e)},expression:"formData.redirect"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"组件名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"组件Name"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"组件路径",prop:"component"}},[a("el-input",{attrs:{placeholder:"组件路径"},model:{value:t.formData.component,callback:function(e){t.$set(t.formData,"component",e)},expression:"formData.component"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"侧边可见",prop:"hidden"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.hidden,callback:function(e){t.$set(t.formData,"hidden",e)},expression:"formData.hidden"}},[a("el-radio-button",{attrs:{label:"0"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"1"}},[t._v("否")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"顶级可见",prop:"alwaysShow"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.alwaysShow,callback:function(e){t.$set(t.formData,"alwaysShow",e)},expression:"formData.alwaysShow"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"缓存页面",prop:"noCache"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.noCache,callback:function(e){t.$set(t.formData,"noCache",e)},expression:"formData.noCache"}},[a("el-radio-button",{attrs:{label:"0"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"1"}},[t._v("否")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"面包屑",prop:"breadcrumb"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.breadcrumb,callback:function(e){t.$set(t.formData,"breadcrumb",e)},expression:"formData.breadcrumb"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"权限标识",prop:"roles"}},[a("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"xx:list"},model:{value:t.formData.roles,callback:function(e){t.$set(t.formData,"roles",e)},expression:"formData.roles"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type,expression:"formData.type === '1'"}],attrs:{label:"图标",prop:"icon"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"450",trigger:"click"},on:{show:function(e){return t.$refs["iconSelect"].reset()}}},[a("IconSelect",{ref:"iconSelect",on:{selected:t.selected}}),t._v(" "),a("el-input",{staticStyle:{width:"450px"},attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}},[t.formData.icon?a("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":t.formData.icon},slot:"prefix"}):a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.cancelDialog()}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){"create"===t.dialogAction?t.doCreate():t.doUpdate()}}},[t._v("提交")])],1)],1)],1)},o=[],i=(a("55dd"),a("7f7f"),a("ac6a"),a("5df3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{value:t.valueId,placeholder:t.placeholder}},[a("el-option",{attrs:{value:t.valueId,label:t.valueLabel}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",data:t.options,props:t.props,"node-key":t.nodeKey},on:{"node-click":t.handleNodeClick}})],1)],1)}),n=[],l={name:"TreeSelectE",props:{value:{type:String,default:function(){return""}},options:{type:Array,default:function(){return[]}},nodeKey:{type:String,default:function(){return"id"}},props:{type:Object,default:function(){return{label:"label",children:"children"}}},accordion:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择"}}},data:function(){return{}},computed:{valueId:function(){return this.value},valueLabel:function(){return""===this.value?"":this.$refs.selectTree.getNode(this.value).data[this.props.label]}},methods:{handleNodeClick:function(t){this.$emit("update:value",t[this.nodeKey])}}},s=l,c=(a("ac39"),a("2877")),u=Object(c["a"])(s,i,n,!1,null,"fa05c2a8",null),d=u.exports,f=a("fa20"),p=a("7831");function m(){return{data:function(){return{searchOptionsInputs:[{prop:"title",placeholder:"字段：标题",tooltip:"查询字段：标题",maxlength:15,width:150}],searchOptionsRules:{title:[{validator:p["a"],trigger:"blur"}]}}}}}var h=m,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon-body"},[a("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:t.filterIcons},nativeOn:{input:function(e){return t.filterIcons(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),a("div",{staticClass:"icon-list"},t._l(t.iconList,(function(e,r){return a("div",{key:r,on:{click:function(a){return t.selectedIcon(e)}}},[a("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":e}}),t._v(" "),a("span",[t._v(t._s(e))])],1)})),0)],1)},v=[],D=(a("6762"),a("2fdb"),a("4917"),a("51ff")),w=function(t){return t.keys()},y=/\.\/(.*)\.svg/,_=w(D).map((function(t){return t.match(y)[1]})),g=_,x={name:"IconSelect",data:function(){return{name:"",iconList:g}},methods:{filterIcons:function(){var t=this;this.name?this.iconList=this.iconList.filter((function(e){return e.includes(t.name)})):this.iconList=g},selectedIcon:function(t){this.$emit("selected",t),document.body.click()},reset:function(){this.name="",this.iconList=g}}},$=x,k=(a("e8c0"),Object(c["a"])($,b,v,!1,null,"786104b6",null)),S=k.exports,C=a("c179"),O=a("e9df"),N={name:"AdminMenu",components:{TreeSelectE:d,SearchOptions:f["a"],IconSelect:S},mixins:[h()],data:function(){return{query:{},tableLoading:!1,tableData:[],treeData:[{id:"0",title:"一级标题",children:[]}],dialogVisible:!1,dialogAction:"",dialogActionMap:{update:"编辑",create:"新建"},formData:{id:"",type:"1",name:"",path:"",component:"",redirect:"noRedirect",hidden:"0",alwaysShow:"0",title:"",icon:"",noCache:"1",breadcrumb:"1",roles:"",sort:"1",pid:""},rules:{sort:[{required:!0,validator:C["f"],trigger:"change"}],title:[{required:!0,validator:C["a"],trigger:"change"}]}}},methods:{refreshTblDisplay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tableLoading=!0;var e=JSON.parse(JSON.stringify(t));Object(O["c"])(e).then(function(t){this.tableData.splice(0),this.tableData=t.menu.slice(0)}.bind(this)).catch(function(t){this.tableData.splice(0),this.$message({message:t,type:"warning"})}.bind(this)).finally(function(){this.tableLoading=!1}.bind(this))},preCreate:function(){this.rstFormData(),Object(O["c"])({req:"id_title_pid"}).then(function(t){var e=this;this.treeData[0].children.splice(0),this.treeData[0].children=t.menu_list.slice(0),this.dialogAction="create",this.dialogVisible=!0,this.$nextTick((function(){e.$refs["form"].clearValidate()}))}.bind(this)).catch(function(t){this.tableData.splice(0),this.$message({message:t,type:"warning"})}.bind(this))},doCreate:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(O["a"])(t.formData).then(function(t){var e=this;this.dialogAction="",this.dialogVisible=!1,this.$nextTick((function(){e.rstFormData(),e.refreshTblDisplay(e.query)}))}.bind(t)).catch(function(t){this.$message({message:t,type:"warning"})}.bind(t))}))},preUpdate:function(t){this.rstFormData(),Promise.all([Object(O["c"])({req:"id_title_pid"}),Object(O["c"])({id:t})]).then(function(t){var e=this;this.treeData[0].children.splice(0),this.treeData[0].children=t[0].menu_list.slice(0),this.updateFormData(t[1]["form"]),this.dialogAction="update",this.dialogVisible=!0,this.$nextTick((function(){e.$refs["form"].clearValidate()}))}.bind(this)).catch(function(t){this.$message({message:t,type:"warning"})}.bind(this))},doUpdate:function(){var t=this;this.$refs["form"].validate((function(e){e&&Object(O["d"])(t.formData).then(function(t){var e=this;this.dialogAction="",this.dialogVisible=!1,this.$nextTick((function(){e.rstFormData(),e.refreshTblDisplay(e.query)}))}.bind(t)).catch(function(t){this.$message({message:t,type:"warning"})}.bind(t))}))},doDelete:function(t){var e=this;this.$confirm("确定删除吗？将同时删除子节点","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){Object(O["b"])(t).then(function(t){var e=this;this.$nextTick((function(){e.refreshTblDisplay(e.query)}))}.bind(e)).catch(function(t){this.$message({message:t,type:"warning"})}.bind(e))})).catch((function(){}))},selected:function(t){this.formData.icon=t},rstFormData:function(){this.formData.id="",this.formData.type="1",this.formData.name="",this.formData.path="",this.formData.component="",this.formData.redirect="noRedirect",this.formData.hidden="0",this.formData.alwaysShow="0",this.formData.title="",this.formData.icon="",this.formData.noCache="1",this.formData.breadcrumb="1",this.formData.roles="",this.formData.sort="1",this.formData.pid=""},updateFormData:function(t){this.formData.id=t.id,this.formData.type=t.type,this.formData.name=t.name,this.formData.path=t.path,this.formData.component=t.component,this.formData.redirect=t.redirect,this.formData.hidden=t.hidden,this.formData.alwaysShow=t.alwaysShow,this.formData.title=t.title,this.formData.icon=t.icon,this.formData.noCache=t.noCache,this.formData.breadcrumb=t.breadcrumb,this.formData.roles=t.roles,this.formData.sort=t.sort,this.formData.pid=t.pid},cancelDialog:function(){this.dialogAction="",this.dialogVisible=!1,this.rstFormData()},handleSearch:function(t){this.query=JSON.parse(JSON.stringify(t)),this.refreshTblDisplay(this.query)},searchChange:function(t){this.query=JSON.parse(JSON.stringify(t)),this.refreshTblDisplay(this.query)},buildMenu:function(){console.log("Debug formData.pid: "),console.log(this.formData.pid)}}},E=N,T=Object(c["a"])(E,r,o,!1,null,null,null);e["default"]=T.exports},7831:function(t,e,a){"use strict";a.d(e,"a",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"c",(function(){return f})),a.d(e,"d",(function(){return p}));var r=/^([1-9][0-9]*)$/,o=/^([\u4e00-\u9fa5]){1,15}$/,i=/^([A-z\u4E00-\u9FA5]{1,40})$/,n=/^[a-z_]{1,60}$/,l=/^[1][3,4,5,7,8][0-9]{9}$/,s=/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,c=/^([0-9]{1,17}[0-9x])$/;function u(t,e,a){return e?o.test(e)?void a():a(new Error("请输入中文")):a()}function d(t,e,a){return e?i.test(e)?void a():a(new Error("请输入中文或英文")):a()}function f(t,e,a){return e?n.test(e)?void a():a(new Error("允许输入小写英文或下划线")):a()}function p(t,e,a){return e?o.test(e)?a():s.test(e)?a():l.test(e)?a():c.test(e)?a():r.test(e)?a():a(new Error("输入字符不合规")):a()}},ac39:function(t,e,a){"use strict";var r=a("139b"),o=a.n(r);o.a},b127:function(t,e,a){},c179:function(t,e,a){"use strict";a.d(e,"f",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"e",(function(){return p})),a.d(e,"b",(function(){return m}));var r=/^([1-9][0-9]*)$/,o=/^([\u4e00-\u9fa5]){1,15}$/,i=/^([A-z\u4E00-\u9FA5]{1,40})$/,n=/^[a-z_]{1,60}$/,l=/^[1][3,4,5,7,8][0-9]{9}$/,s=/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/;function c(t,e,a){return e&&r.test(e)?void a():a(new Error("请输入正整数"))}function u(t,e,a){return e&&o.test(e)?void a():a(new Error("请输入中文，最多15个"))}function d(t,e,a){return e&&i.test(e)?void a():a(new Error("请输入中文或英文，最多40个"))}function f(t,e,a){return e&&n.test(e)?void a():a(new Error("请输入小写字母或下划线，最多60个"))}function p(t,e,a){return e&&l.test(e)?void a():a(new Error("请输入11位手机号码"))}function m(t,e,a){return e&&s.test(e)?void a():a(new Error("请输入有效的电子邮箱"))}},e8c0:function(t,e,a){"use strict";var r=a("b127"),o=a.n(r);o.a},e9df:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return l}));var r=a("b775");function o(t){return Object(r["a"])({url:"/api/menu",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/api/menu",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/api/menu",method:"put",data:t})}function l(t){return r["a"].delete("/api/menu",{data:{id:t}})}}}]);