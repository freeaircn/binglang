(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e18f436"],{"01c2":function(e,t,i){"use strict";var n=i("9598"),s=i.n(n);s.a},"0f49":function(e,t,i){},"8a88":function(e,t,i){"use strict";var n=i("0f49"),s=i.n(n);s.a},9598:function(e,t,i){},ad7f:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o})),i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return r}));var n=i("d7e4");function s(e){var t=n["b"].REGEX_POHONE;return t.test(e)}function o(e){var t=n["b"].REGEX_MAIL;return t.test(e)}function a(e){var t=n["b"].REGEX_VERIFICAITON_CODE;return t.test(e)}function r(e){var t=n["b"].REGEX_PASSWORD;return t.test(e)}},d3b9:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"signup-wrapper"},[i("div",{staticClass:"signup-container mb-4"},[i("div",{staticClass:"signup-header py-responsive is-center"},[i("router-link",{attrs:{to:"/home"}},[i("span",[i("svg-logo",{attrs:{"logo-class":"be_green"}})],1)]),e._v(" "),i("h2",{staticClass:"title"},[e._v("注册")])],1),e._v(" "),i("el-form",{ref:"signupForm",staticClass:"container-sm px-responsive",attrs:{model:e.signupForm,rules:e.signupFormRules,"label-position":"left"}},[i("el-form-item",{ref:"email",attrs:{prop:"email"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"icon_dmail_fill"}})],1),e._v(" "),i("el-input",{attrs:{disabled:!0===e.isValidCode,name:"email",type:"text",placeholder:"电子邮箱",clearable:""},model:{value:e.signupForm.email,callback:function(t){e.$set(e.signupForm,"email",t)},expression:"signupForm.email"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1===e.isValidCode,expression:"isValidCode === false"}],ref:"verificationCode",attrs:{prop:"verificationCode"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"verification_code"}})],1),e._v(" "),i("el-input",{staticClass:"code-field",attrs:{type:"text",name:"verificationCode",placeholder:"输入验证码",clearable:""},model:{value:e.signupForm.verificationCode,callback:function(t){e.$set(e.signupForm,"verificationCode",t)},expression:"signupForm.verificationCode"}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.btnCodeConent,expression:"btnCodeConent"}],staticClass:"btn-code",attrs:{disabled:e.isBtnDisable,type:"button"},domProps:{value:e.btnCodeConent},on:{click:e.handleRequestCode,input:function(t){t.target.composing||(e.btnCodeConent=t.target.value)}}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}],ref:"userphone",attrs:{prop:"userphone"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"icon_mobilephone"}})],1),e._v(" "),i("el-input",{attrs:{name:"userphone",type:"text",placeholder:"手机号",clearable:""},on:{blur:function(t){return e.checkInfo("phone")}},model:{value:e.signupForm.userphone,callback:function(t){e.$set(e.signupForm,"userphone",t)},expression:"signupForm.userphone"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}],attrs:{prop:"password"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),i("el-input",{attrs:{name:"password",placeholder:"密码","show-password":"",clearable:""},model:{value:e.signupForm.password,callback:function(t){e.$set(e.signupForm,"password",t)},expression:"signupForm.password"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}],attrs:{prop:"confirmPassword"}},[i("span",{staticClass:"svg-container"},[i("svg-icon",{attrs:{"icon-class":"password2"}})],1),e._v(" "),i("el-input",{attrs:{name:"confirmPassword",placeholder:"再次输入密码","show-password":"",clearable:""},model:{value:e.signupForm.confirmPassword,callback:function(t){e.$set(e.signupForm,"confirmPassword",t)},expression:"signupForm.confirmPassword"}})],1),e._v(" "),i("div",{staticStyle:{margin:"0px 0px 15px 0px",color:"#409EFF"}},[i("router-link",{attrs:{to:"/login"}},[e._v("已有账号？去登录")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.isValidCode,expression:"isValidCode === false"}]},[i("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleVerification(t)}}},[e._v("验 证")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isValidCode,expression:"isValidCode === true"}]},[i("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleCreateUser(t)}}},[e._v("注 册")])],1),e._v(" "),i("div",{staticClass:"tips"},[i("p",[e._v("1. 验证码将发送到输入的邮箱")]),e._v(" "),i("p",[e._v("2. 密码请勿包含银行账号或支付软件密码")]),e._v(" "),i("p",[e._v("3. 注册成功后，请使用手机号登录")])])],1)],1)])},s=[],o=i("d7e4"),a=i("ad7f"),r=i("b775");function c(e){return Object(r["a"])({url:"/users/check_phone",method:"post",data:{phone:e}})}function l(e){return Object(r["a"])({url:"/users/request_code",method:"post",data:{email:e}})}function u(e,t){return Object(r["a"])({url:"/users/check_verification_code",method:"post",data:{email:e,code:t}})}function d(e,t,i){return Object(r["a"])({url:"/users/create_user",method:"post",data:{phone:e,email:t,password:i}})}i("a481");function p(e){var t=/@([a-z1-9]{2,3})/,i=t.exec(e);return null!==i&&"@163"===i[0]?o["b"].MAIL_163_URL:null!==i&&"@126"===i[0]?o["b"].MAIL_126_URL:null!==i&&"@139"===i[0]?o["b"].MAIL_139_URL:null!==i&&"@qq"===i[0]&&o["b"].MAIL_QQ_URL}function m(e,t){var i=setInterval((function(){clearInterval(i),i=null,"blank"===t&&window.open(e,"_blank"),"replace"===t&&window.location.replace(e)}),5e3)}var f={name:"Signup",data:function(){var e=this,t=function(e,t,i){Object(a["a"])(t)?i():i(new Error("请输入有效的邮箱！"))},i=function(e,t,i){Object(a["d"])(t)?i():i(new Error("请输入5位验证码！"))},n=function(e,t,i){Object(a["c"])(t)?i():i(new Error("请输入11位有效的手机号！"))},s=function(t,i,n){Object(a["b"])(i)?(""!==e.signupForm.confirmPassword&&e.$refs.signupForm.validateField("confirmPassword"),n()):n(new Error("密码最小长度为8位，必须包含大写、小写字母、数字！"))},o=function(t,i,n){i!==e.signupForm.password?n(new Error("两次输入密码不一致!")):n()};return{isValidCode:!1,isBtnDisable:!1,btnCodeConent:"获取验证码",timer60:"",countdown:60,signupForm:{email:"",verificationCode:"",userphone:"",password:"",confirmPassword:""},signupFormRules:{email:[{required:!0,trigger:"change",validator:t}],verificationCode:[{required:!0,trigger:"change",validator:i}],userphone:[{required:!0,trigger:"change",validator:n}],password:[{required:!0,trigger:"change",validator:s}],confirmPassword:[{required:!0,trigger:"change",validator:o}]},loading:!1,redirect:void 0}},computed:{emailLowcase:function(){return this.signupForm.email.toLowerCase()}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{checkInfo:function(e){var t=this.signupForm.userphone;"phone"===e&&Object(a["c"])(t)&&c(t).then(function(e){e.code===o["a"].USERS_SIGNUP_IDENTITY_EXISTING&&(this.$refs.userphone.resetField(),this.$message({type:"error",showClose:!0,message:t+e.msg,duration:3e3}))}.bind(this)).catch((function(e){console.log(e)}))},diableRequestCodeBtn:function(){var e=this;this.isBtnDisable=!0,this.btnCodeConent="重新发送("+this.countdown+")",this.timer60||(this.timer60=setInterval((function(){e.countdown>0&&e.countdown<=60&&(e.countdown--,0!==e.countdown?e.btnCodeConent="重新发送("+e.countdown+")":(clearInterval(e.timer60),e.isBtnDisable=!1,e.btnCodeConent="获取验证码",e.countdown=60,e.timer60=null))}),1e3))},handleRequestCode:function(){this.$refs.signupForm.validateField("email");var e=this.$refs.email.validateMessage;if(""===e){this.diableRequestCodeBtn();var t=this.emailLowcase;l(t).then(function(e){if(e.code===o["a"].SUCCESS){var t=p(this.emailLowcase);t?(this.$message({type:"info",message:"验证码已发送，5秒后将在新窗口打开邮箱登录页面",duration:4e3}),m(t,"blank")):this.$message({type:"info",message:"验证码已发送，请用户登录邮箱查看验证码",duration:3e3})}else this.$message({type:"info",message:e.msg,duration:3e3})}.bind(this)).catch(function(e){console.log(e),this.$message({type:"info",message:"发送验证码失败，请重新获取!!",duration:3e3})}.bind(this))}},handleVerification:function(){this.$refs.signupForm.validateField("email"),this.$refs.signupForm.validateField("verificationCode");var e=this.$refs.email.validateMessage+this.$refs.verificationCode.validateMessage;if(""===e){var t=this.emailLowcase,i=this.signupForm.verificationCode;u(t,i).then(function(e){e.code===o["a"].SUCCESS?(this.$message({type:"info",message:"验证码正确",duration:3e3}),this.isValidCode=!0):this.$message({type:"info",message:e.msg,duration:3e3})}.bind(this)).catch(function(e){console.log(e),this.$message({type:"info",message:"验证码校验失败!!",duration:3e3})}.bind(this))}},handleCreateUser:function(){var e=this;this.$refs.signupForm.validate((function(t){if(t){var i=e.signupForm.userphone,n=e.emailLowcase,s=e.signupForm.password;e.$confirm("请确认手机号“"+i+"”是否正确?","提示",{confirmButtonText:"正确",cancelButtonText:"返回修改",type:"warning"}).then((function(){d(i,n,s).then(function(e){e.code===o["a"].SUCCESS?this.$router.push({name:"login"}):this.$message({type:"info",message:e.msg,duration:3e3})}.bind(e)).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消注册"})}))}}))}}},v=f,h=(i("01c2"),i("8a88"),i("2877")),_=Object(h["a"])(v,n,s,!1,null,"41eada38",null);t["default"]=_.exports},d7e4:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));var n={COOKIE_EXP:48,REGEX_POHONE:/^[1][0-9]$/,REGEX_MAIL:/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/,REGEX_PASSWORD:/^[0-9a-zA-Z]+$/,REGEX_CHINESE_NAME:/^([\u4e00-\u9fa5]){2,5}$/,REGEX_VERIFICAITON_CODE:/^[0-9]{5}$/,MAIL_163_URL:"https://mail.163.com",MAIL_126_URL:"https://mail.126.com",MAIL_139_URL:"http://mail.10086.cn/",MAIL_QQ_URL:"https://mail.qq.com"},s={SUCCESS:0,POST_INPUT_EMPTY:101,USERS_TOKEN_INVALID:110,USERS_SIGNUP_IDENTITY_EXISTING:201,USERS_SIGNUP_EMAIL_EXISTING:202,USERS_SIGNUP_USER_CREATE_FAILED:203,USERS_SIGNUP_LOG_USER_INFO_FAILED:204,USERS_LOGIN_FAILED:250,USERS_LOGIN_GEN_TOKEN_FAILED:251,USERS_ACTIVATE_IDENTITY_NOT_EXISTING:300,USERS_ACTIVATE_USER_BEEN_ACTIVATED:301,USERS_ACTIVATE_INPUT_EMAIL_INVALID:302,USERS_ACTIVATE_GEN_CODE_FAILED:303,USERS_ACTIVATE_SEND_MAIL_FAILED:304,USERS_GET_USER_INFO_FAILED:350}}}]);