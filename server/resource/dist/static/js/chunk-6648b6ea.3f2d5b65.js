(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6648b6ea"],{"662e":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"head-container"},[o("div",[o("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索菜单名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.query.words,callback:function(e){t.$set(t.query,"words",e)},expression:"query.words"}}),t._v(" "),o("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),o("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.preCreateRow}},[t._v("新增")]),t._v(" "),o("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"info",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")])],1)]),t._v(" "),o("el-divider",[o("i",{staticClass:"el-icon-download"})]),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id",size:"small"}},[o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"菜单名",width:"125px"}}),t._v(" "),o("el-table-column",{attrs:{prop:"icon",label:"图标",align:"center",width:"60px"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("svg-icon",{attrs:{"icon-class":t.row.icon}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.sort)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"path",label:"路由地址"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"permission",label:"权限标识"}}),t._v(" "),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"component",label:"组件路径"}}),t._v(" "),o("el-table-column",{attrs:{prop:"outlink",label:"外部链接",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.outlink?o("span",[t._v("是")]):o("span",[t._v("否")])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"cache",label:"缓存",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.cache?o("span",[t._v("是")]):o("span",[t._v("否")])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"hidden",label:"可见",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.hidden?o("span",[t._v("否")]):o("span",[t._v("是")])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"create_time",label:"创建日期",width:"135px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.create_time))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"130px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[o("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.preUpdateRow(a)}}}),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.doDelRow(a)}}})]}}])})],1),t._v(" "),o("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.dialogVisible,title:t.dialogActionMap[t.dialogAction],width:"580px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{ref:"form",attrs:{inline:!0,model:t.formData,rules:t.rules,size:"small","label-width":"80px"}},[o("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[o("el-radio-group",{staticStyle:{width:"178px"},attrs:{size:"mini"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[o("el-radio-button",{attrs:{label:"0"}},[t._v("目录")]),t._v(" "),o("el-radio-button",{attrs:{label:"1"}},[t._v("子菜单")]),t._v(" "),o("el-radio-button",{attrs:{label:"2"}},[t._v("按钮")])],1)],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==t.formData.type.toString(),expression:"formData.type.toString() !== '2'"}],attrs:{label:"菜单图标",prop:"icon"}},[o("el-popover",{attrs:{placement:"bottom-start",width:"450",trigger:"click"},on:{show:function(e){return t.$refs["iconSelect"].reset()}}},[o("IconSelect",{ref:"iconSelect",on:{selected:t.selected}}),t._v(" "),o("el-input",{staticStyle:{width:"450px"},attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}},[t.formData.icon?o("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":t.formData.icon},slot:"prefix"}):o("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==t.formData.type.toString(),expression:"formData.type.toString() !== '2'"}],attrs:{label:"外部链接",prop:"outlink"}},[o("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.outlink,callback:function(e){t.$set(t.formData,"outlink",e)},expression:"formData.outlink"}},[o("el-radio-button",{attrs:{label:"true"}},[t._v("是")]),t._v(" "),o("el-radio-button",{attrs:{label:"false"}},[t._v("否")])],1)],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"菜单缓存",prop:"cache"}},[o("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.cache,callback:function(e){t.$set(t.formData,"cache",e)},expression:"formData.cache"}},[o("el-radio-button",{attrs:{label:"true"}},[t._v("是")]),t._v(" "),o("el-radio-button",{attrs:{label:"false"}},[t._v("否")])],1)],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==t.formData.type.toString(),expression:"formData.type.toString() !== '2'"}],attrs:{label:"菜单可见",prop:"hidden"}},[o("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.hidden,callback:function(e){t.$set(t.formData,"hidden",e)},expression:"formData.hidden"}},[o("el-radio-button",{attrs:{label:"false"}},[t._v("是")]),t._v(" "),o("el-radio-button",{attrs:{label:"true"}},[t._v("否")])],1)],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==t.formData.type.toString(),expression:"formData.type.toString() !== '2'"}],attrs:{label:"菜单标题",prop:"name"}},[o("el-input",{style:"0"===t.formData.type.toString()?"width: 450px":"width: 178px",attrs:{placeholder:"菜单标题"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formData.type.toString(),expression:"formData.type.toString() === '2'"}],attrs:{label:"按钮名称",prop:"name"}},[o("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"按钮名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"!==t.formData.type.toString(),expression:"formData.type.toString() !== '0'"}],attrs:{label:"权限标识",prop:"permission"}},[o("el-input",{staticStyle:{width:"178px"},attrs:{disabled:t.formData.outlink,placeholder:"权限标识"},model:{value:t.formData.permission,callback:function(e){t.$set(t.formData,"permission",e)},expression:"formData.permission"}})],1),t._v(" "),"2"!==t.formData.type.toString()?o("el-form-item",{attrs:{label:"路由地址",prop:"path"}},[o("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"路由地址"},model:{value:t.formData.path,callback:function(e){t.$set(t.formData,"path",e)},expression:"formData.path"}})],1):t._e(),t._v(" "),o("el-form-item",{attrs:{label:"菜单排序",prop:"sort"}},[o("el-input-number",{staticStyle:{width:"178px"},attrs:{min:0,max:999,"controls-position":"right"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",t._n(e))},expression:"formData.sort"}})],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formData.outlink&&"1"===t.formData.type.toString(),expression:"!formData.outlink && formData.type.toString() === '1'"}],attrs:{label:"组件名称",prop:"component_name"}},[o("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"匹配组件内Name字段"},model:{value:t.formData.component_name,callback:function(e){t.$set(t.formData,"component_name",e)},expression:"formData.component_name"}})],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.formData.outlink&&"1"===t.formData.type.toString(),expression:"!formData.outlink && formData.type.toString() === '1'"}],attrs:{label:"组件路径",prop:"component"}},[o("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"组件路径"},model:{value:t.formData.component,callback:function(e){t.$set(t.formData,"component",e)},expression:"formData.component"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"上级类目",prop:"pid"}},[o("treeSelect",{staticStyle:{width:"450px"},attrs:{options:t.treeData,placeholder:"选择上级类目"},model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogAction?t.doCreateRow():t.doUpdateRow()}}},[t._v("提交")])],1)],1)],1)},n=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"icon-body"},[o("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:t.filterIcons},nativeOn:{input:function(e){return t.filterIcons(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[o("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),o("div",{staticClass:"icon-list"},t._l(t.iconList,(function(e,a){return o("div",{key:a,on:{click:function(o){return t.selectedIcon(e)}}},[o("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":e}}),t._v(" "),o("span",[t._v(t._s(e))])],1)})),0)],1)},l=[],r=(o("6762"),o("2fdb"),o("7f7f"),o("4917"),o("ac6a"),o("51ff")),s=function(t){return t.keys()},c=/\.\/(.*)\.svg/,u=s(r).map((function(t){return t.match(c)[1]})),p=u,d={name:"IconSelect",data:function(){return{name:"",iconList:p}},methods:{filterIcons:function(){var t=this;this.name?this.iconList=this.iconList.filter((function(e){return e.includes(t.name)})):this.iconList=p},selectedIcon:function(t){this.$emit("selected",t),document.body.click()},reset:function(){this.name="",this.iconList=p}}},m=d,f=(o("e8c0"),o("2877")),h=Object(f["a"])(m,i,l,!1,null,"786104b6",null),v=h.exports,b=o("ca17"),g=o.n(b),w=(o("542c"),/^([0-9a-zA-Z\u4e00-\u9fa5]){2,8}$/);function _(t){return!t||(!!w.test(t)||"只允许输入中文，数字，字母，长度2~8")}o("55dd");var D=o("b775");function y(t){return Object(D["a"])({url:"/api/menu",method:"get",params:{words:t}})}function x(t){return Object(D["a"])({url:"/api/menu",method:"post",data:{id:t.id,name:t.name,type:t.type,pid:t.pid,sort:t.sort,permission:t.permission,component:t.component,component_name:t.component_name,path:t.path,icon:t.icon,cache:t.cache,hidden:t.hidden,outlink:t.outlink,create_time:t.create_time}})}function k(t){return Object(D["a"])({url:"/api/menu",method:"put",data:{id:t}})}function S(t){return D["a"].delete("/api/menu",{data:{id:t}})}var $=/^([0-9a-zA-Z\u4e00-\u9fa5]){2,15}$/,C=/^([0-9a-zA-Z]){2,15}$/;function z(t,e,o){return e&&$.test(e)?void o():o(new Error("只允许输入中文/英文/数字，长度2~15"))}function R(t,e,o){return e&&C.test(e)?void o():o(new Error("只允许输入英文/数字，长度2~15"))}var q={name:"AdminMenu",components:{IconSelect:v,treeSelect:g.a},data:function(){return{query:{words:""},tableLoading:!1,tableData:[],treeData:[{id:0,label:"顶级类目",children:[]}],dialogVisible:!1,dialogAction:"",dialogActionMap:{update:"编辑",create:"新建"},formData:{id:null,type:0,icon:null,outlink:!1,cache:!1,hidden:!1,name:null,permission:null,path:null,sort:999,component_name:null,component:null,pid:0,create_time:null},rules:{name:[{required:!0,validator:z,trigger:"change"}],path:[{required:!0,validator:R,trigger:"change"}],permission:[{validator:z,trigger:"change"}],component_name:[{validator:z,trigger:"change"}],component:[{validator:z,trigger:"change"}]}}},created:function(){this.queryRow()},methods:{queryRow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.tableLoading=!0,y(t).then(function(t){this.tableData.splice(0,this.tableData.length),this.tableData=t.slice(0)}.bind(this)).catch((function(t){console.log(t)})).finally(function(){this.tableLoading=!1}.bind(this))},handleQuery:function(){if(""===this.query.words)this.queryRow();else{var t=_(this.query.words);!0===t?this.queryRow(this.query.words):this.$notify.error({title:"错误",message:t,duration:2e3})}},preCreateRow:function(){this.rstFormData(),y(null).then(function(t){var e=this;this.treeData[0].children.splice(0,this.treeData[0].children.length),this.treeData[0].children=t.slice(0),this.dialogAction="create",this.dialogVisible=!0,this.$nextTick((function(){e.$refs["form"].clearValidate()}))}.bind(this)).catch((function(t){console.log(t)}))},doCreateRow:function(){var t=this;this.$refs["form"].validate((function(e){e&&(console.log(t.formData),x(t.formData).then(function(t){this.dialogAction="",this.dialogVisible=!1,this.queryRow()}.bind(t)).catch((function(t){console.log(t)})))}))},preUpdateRow:function(t){var e=this;this.dialogVisible=!0,this.formData=Object.assign({},t),console.log(this.formData),this.dialogAction="update",this.dialogVisible=!0,this.$nextTick((function(){e.$refs["form"].clearValidate()}))},doUpdateRow:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var o=Object.assign({},t.formData);console.log(o);var a=301;k(a).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),t.dialogAction="",t.dialogFormVisible=!1,t.$notify({title:"Success",message:"更新成功！",type:"success",duration:2e3})}}))},doDelRow:function(){var t=401;S(t).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},selected:function(t){this.formData.icon=t},handleExport:function(){},rstFormData:function(){this.formData={id:null,type:0,icon:null,outlink:!1,cache:!1,hidden:!1,name:null,permission:null,path:null,sort:999,component_name:null,component:null,pid:0,create_time:null}},handleGet:function(){var t="Method: Get";y(t).then((function(t){console.log("Get response received")})).catch((function(t){console.log(t)}))},handlePost:function(){var t="Method: Post";x(t).then((function(t){console.log("Post response received")})).catch((function(t){console.log(t)}))},handleUpdate:function(){var t="Method: Update";k(t).then((function(t){console.log("Update response received")})).catch((function(t){console.log(t)}))},handleDel:function(){var t="Method: Delete";S(t).then((function(t){console.log("Delete response received")})).catch((function(t){console.log(t)}))}}},A=q,L=Object(f["a"])(A,a,n,!1,null,null,null);e["default"]=L.exports},b127:function(t,e,o){},e8c0:function(t,e,o){"use strict";var a=o("b127"),n=o.n(a);n.a}}]);