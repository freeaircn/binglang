(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-457c1ae2","chunk-65e5f2d7"],{"25af":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{"tab-position":"left"},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("el-tab-pane",{attrs:{name:"account_basic_info_tab",label:"基本信息"}},[a("div",{staticClass:"pages-account-settings-title"},[t._v("基本信息")]),t._v(" "),a("el-row",{attrs:{gutter:8}},[a("el-col",{attrs:{xs:24,sm:24,md:4,lg:4,xl:4}},[a("app-avatar",{attrs:{"avatar-url":t.avatarUrl,"upload-api":t.avatarUploadApi}}),t._v(" "),a("div",{staticClass:"pages-account-settings-text"},[a("p",[t._v("工号: "+t._s(t.user.sort))]),t._v(" "),a("p",[t._v("手机: "+t._s(t.user.phone))]),t._v(" "),a("p",[t._v("邮箱: "+t._s(t.user.email))])])],1),t._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[a("el-form",{ref:"account_basic_info_form",attrs:{model:t.formData,rules:t.account_basic_info_form_rules,size:"mini","label-position":"top","label-width":"auto"}},[a("el-form-item",{attrs:{label:"中文名",prop:"username"}},[a("el-input",{staticClass:"w-30",attrs:{clearable:""},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{staticClass:"w-30",model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[a("el-radio",{attrs:{label:"0"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:"1"}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"identity_document_number"}},[a("el-input",{staticClass:"w-30",attrs:{clearable:""},model:{value:t.formData.identity_document_number,callback:function(e){t.$set(t.formData,"identity_document_number",e)},expression:"formData.identity_document_number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"政治面貌",prop:"attr_03_id"}},[a("el-select",{staticClass:"w-30",attrs:{placeholder:"请选择"},model:{value:t.formData.attr_03_id,callback:function(e){t.$set(t.formData,"attr_03_id",e)},expression:"formData.attr_03_id"}},t._l(t.politic_list,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"attr_01_id"}},[a("tree-select",{staticClass:"w-30",attrs:{value:t.formData.attr_01_id,options:t.dept_list,placeholder:"请选择"},on:{"update:value":function(e){return t.$set(t.formData,"attr_01_id",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"岗位",prop:"attr_02_id"}},[a("el-select",{staticClass:"w-30",attrs:{placeholder:"请选择"},model:{value:t.formData.attr_02_id,callback:function(e){t.$set(t.formData,"attr_02_id",e)},expression:"formData.attr_02_id"}},t._l(t.job_list,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"职称",prop:"attr_04_id"}},[a("el-select",{staticClass:"w-30",attrs:{placeholder:"请选择"},model:{value:t.formData.attr_04_id,callback:function(e){t.$set(t.formData,"attr_04_id",e)},expression:"formData.attr_04_id"}},t._l(t.professional_title_list,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isUpdateBtnDisable},on:{click:function(e){return t.doUpdateAccountBasicInfo()}}},[t._v("更新基本信息")])],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{name:"tab_two",label:"安全设置"}})],1)],1)},i=[],r=a("5530"),l={COOKIE_EXP:48,AVATAR_UPLOAD_API:"/api/avatar/update"},n=a("2f62"),o=a("73a3"),c=a("407b"),u=a("b775");function d(t){return Object(u["a"])({url:"/api/account",method:"get",params:t})}function _(t){return Object(u["a"])({url:"/api/account",method:"put",data:t})}var p={name:"AccountSettings",components:{"tree-select":o["a"],"app-avatar":c["default"]},data:function(){return{avatarUploadApi:"http://127.0.0.1"+l.AVATAR_UPLOAD_API,tabIndex:"account_basic_info_tab",isUpdateBtnDisable:!0,formData:{username:"",sex:"0",phone:"",identity_document_number:"",attr_01_id:"",attr_02_id:"",attr_03_id:"",attr_04_id:""},dept_list:[],job_list:[],politic_list:[],professional_title_list:[],account_basic_info_form_rules:{}}},computed:Object(r["a"])(Object(r["a"])({},Object(n["b"])(["user"])),{},{avatarUrl:function(){return"http://127.0.0.1"+this.user.avatar_file_path+this.user.avatar_file_name}}),mounted:function(){this.getListContent()},methods:{getListContent:function(){d({form:"list"}).then(function(t){var e=this;this.copyListContent(t),this.updateFormData(),this.isUpdateBtnDisable=!1,this.$nextTick((function(){e.$refs["account_basic_info_form"].clearValidate()}))}.bind(this)).catch(function(t){this.$message({message:t,type:"warning"})}.bind(this))},copyListContent:function(t){this.dept_list=t.dept_list.slice(0),this.job_list=t.job_list.slice(0),this.politic_list=t.politic_list.slice(0),this.professional_title_list=t.professional_title_list.slice(0)},updateFormData:function(){this.formData.username=this.user.username,this.formData.sex=this.user.sex,this.formData.identity_document_number=this.user.identity_document_number,this.formData.phone=this.user.phone,this.formData.attr_01_id=this.user.attr_01_id,this.formData.attr_02_id=this.user.attr_02_id,this.formData.attr_03_id=this.user.attr_03_id,this.formData.attr_04_id=this.user.attr_04_id},doUpdateAccountBasicInfo:function(){var t=this;this.$refs["account_basic_info_form"].validate((function(e){e&&(t.formData.phone=t.user.phone,_(t.formData).then(function(t){var e=this;this.$nextTick((function(){e.$refs["account_basic_info_form"].clearValidate()}))}.bind(t)).catch(function(t){this.$message({message:t,type:"warning"})}.bind(t)))}))}}},f=p,m=(a("9a3f"),a("2877")),b=Object(m["a"])(f,s,i,!1,null,"f3c0007c",null);e["default"]=b.exports},3430:function(t,e,a){"use strict";var s=a("89ba"),i=a.n(s);i.a},"407b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"pages-account-settings-avatar-title"},[t._v("头像")]),t._v(" "),a("el-upload",{attrs:{action:t.uploadApi,multiple:!1,"show-file-list":!1,accept:"png","list-type":"picture","on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[a("el-image",{staticClass:"pages-account-settings-avatar",attrs:{src:t.avatarUrl}},[a("div",{staticClass:"pages-account-settings-avatar-img-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])])],1)],1)},i=[],r={name:"AppAvatar",props:{avatarUrl:{type:String,default:function(){return""}},uploadApi:{type:String,default:function(){return""}}},methods:{beforeAvatarUpload:function(t){var e=t.size/1024/1024<2,a="image/jpeg"===t.type,s="image/png"===t.type;return e?!(!a&&!s)||(this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),!1):(this.$message.error("上传头像图片大小不能超过 2MB!"),!1)},handleAvatarSuccess:function(t,e){console.log("#1"),console.log(t),console.log("#2"),console.log(e),this.avatarUrl=URL.createObjectURL(e.raw),console.log(this.avatarUrl)}}},l=r,n=(a("6c9b"),a("2877")),o=Object(n["a"])(l,s,i,!1,null,"5af2e820",null);e["default"]=o.exports},"668c":function(t,e,a){},"6c9b":function(t,e,a){"use strict";var s=a("668c"),i=a.n(s);i.a},"73a3":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{ref:"select",attrs:{value:t.valueId,placeholder:t.placeholder}},[a("el-option",{attrs:{value:t.valueId,label:t.valueLabel}},[a("el-tree",{ref:"selectTree",attrs:{data:t.options,props:t.props,"node-key":t.nodeKey},on:{"node-click":t.handleNodeClick}})],1)],1)},i=[],r={name:"TreeSelect",props:{value:{type:String,default:function(){return""}},options:{type:Array,default:function(){return[]}},nodeKey:{type:String,default:function(){return"id"}},props:{type:Object,default:function(){return{label:"label",children:"children"}}},accordion:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return"请选择"}}},data:function(){return{valueId:this.value,valueLabel:""}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.$refs["selectTree"].getNode(t)?(e.valueLabel=e.$refs["selectTree"].getNode(t).data[e.props.label],e.valueId=t):(e.valueLabel="",e.valueId="")}))}},mounted:function(){this.$refs["selectTree"].getNode(this.valueId)?this.valueLabel=this.$refs["selectTree"].getNode(this.valueId).data[this.props.label]:this.valueLabel=""},methods:{handleNodeClick:function(t){this.$emit("update:value",t[this.nodeKey]),this.$refs["select"].blur()}}},l=r,n=(a("3430"),a("2877")),o=Object(n["a"])(l,s,i,!1,null,"46e05ccd",null);e["a"]=o.exports},"89ba":function(t,e,a){},"9a3f":function(t,e,a){"use strict";var s=a("ad5e"),i=a.n(s);i.a},ad5e:function(t,e,a){}}]);