(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6648b6ea"],{"662e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"head-container"},[a("div",[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",placeholder:"搜索菜单名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.query.words,callback:function(e){t.$set(t.query,"words",e)},expression:"query.words"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.preCreate}},[t._v("新增")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"info",icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("导出")])],1)]),t._v(" "),a("el-divider",[a("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{data:t.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id",size:"small"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"125px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.sort)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"path",label:"url地址"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"组件名"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"component",label:"组件路径"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"redirect",label:"重定向"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hidden",label:"侧边可见",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.hidden?a("span",[t._v("否")]):a("span",[t._v("是")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"alwaysShow",label:"顶级可见",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.alwaysShow?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"noCache",label:"页面缓存",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.noCache?a("span",[t._v("否")]):a("span",[t._v("是")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"breadcrumb",label:"面包屑",width:"75px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.breadcrumb?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"roles",label:"权限标识"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建日期",width:"135px"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.preUpdate(o)}}}),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.doDelete(o.id)}}})]}}])})],1),t._v(" "),a("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,visible:t.dialogVisible,title:t.dialogActionMap[t.dialogAction],width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("菜单")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("按钮")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},["1"===t.formData.type.toString()?a("el-form-item",{attrs:{label:"url地址",prop:"path"}},[a("el-input",{attrs:{placeholder:"路由地址"},model:{value:t.formData.path,callback:function(e){t.$set(t.formData,"path",e)},expression:"formData.path"}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"重定向",prop:"redirect"}},[a("el-input",{attrs:{placeholder:"重定向地址"},model:{value:t.formData.redirect,callback:function(e){t.$set(t.formData,"redirect",e)},expression:"formData.redirect"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"组件名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"路由/组件Name"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"组件路径",prop:"component"}},[a("el-input",{attrs:{placeholder:"组件路径"},model:{value:t.formData.component,callback:function(e){t.$set(t.formData,"component",e)},expression:"formData.component"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"侧边可见",prop:"hidden"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.hidden,callback:function(e){t.$set(t.formData,"hidden",e)},expression:"formData.hidden"}},[a("el-radio-button",{attrs:{label:"false"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"true"}},[t._v("否")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"顶级可见",prop:"alwaysShow"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.alwaysShow,callback:function(e){t.$set(t.formData,"alwaysShow",e)},expression:"formData.alwaysShow"}},[a("el-radio-button",{attrs:{label:"true"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"false"}},[t._v("否")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"页面缓存",prop:"noCache"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.noCache,callback:function(e){t.$set(t.formData,"noCache",e)},expression:"formData.noCache"}},[a("el-radio-button",{attrs:{label:"false"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"true"}},[t._v("否")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"面包屑",prop:"breadcrumb"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.formData.breadcrumb,callback:function(e){t.$set(t.formData,"breadcrumb",e)},expression:"formData.breadcrumb"}},[a("el-radio-button",{attrs:{label:"true"}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:"false"}},[t._v("否")])],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"权限标识",prop:"roles"}},[a("el-input",{attrs:{placeholder:"xx:list"},model:{value:t.formData.roles,callback:function(e){t.$set(t.formData,"roles",e)},expression:"formData.roles"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:0,max:999,"controls-position":"right"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",t._n(e))},expression:"formData.sort"}})],1)],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formData.type.toString(),expression:"formData.type.toString() === '1'"}],attrs:{label:"图标",prop:"icon"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"450",trigger:"click"},on:{show:function(e){return t.$refs["iconSelect"].reset()}}},[a("IconSelect",{ref:"iconSelect",on:{selected:t.selected}}),t._v(" "),a("el-input",{staticStyle:{width:"450px"},attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}},[t.formData.icon?a("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":t.formData.icon},slot:"prefix"}):a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"上级类目",prop:"pid"}},[a("treeSelect",{staticStyle:{width:"450px"},attrs:{options:t.treeData,placeholder:"选择上级类目"},model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){"create"===t.dialogAction?t.doCreate():t.doUpdate()}}},[t._v("提交")])],1)],1)],1)},i=[],l=(a("55dd"),a("7f7f"),a("bc3a")),r=a.n(l),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon-body"},[a("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:t.filterIcons},nativeOn:{input:function(e){return t.filterIcons(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),a("div",{staticClass:"icon-list"},t._l(t.iconList,(function(e,o){return a("div",{key:o,on:{click:function(a){return t.selectedIcon(e)}}},[a("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":e}}),t._v(" "),a("span",[t._v(t._s(e))])],1)})),0)],1)},s=[],c=(a("6762"),a("2fdb"),a("4917"),a("ac6a"),a("51ff")),u=function(t){return t.keys()},d=/\.\/(.*)\.svg/,m=u(c).map((function(t){return t.match(d)[1]})),p=m,f={name:"IconSelect",data:function(){return{name:"",iconList:p}},methods:{filterIcons:function(){var t=this;this.name?this.iconList=this.iconList.filter((function(e){return e.includes(t.name)})):this.iconList=p},selectedIcon:function(t){this.$emit("selected",t),document.body.click()},reset:function(){this.name="",this.iconList=p}}},h=f,b=(a("e8c0"),a("2877")),v=Object(b["a"])(h,n,s,!1,null,"786104b6",null),D=v.exports,w=a("ca17"),_=a.n(w),y=(a("542c"),/^([0-9a-zA-Z\u4e00-\u9fa5]){2,8}$/);function g(t){return!t||(!!y.test(t)||"只允许输入中文，数字，字母，长度2~8")}var x=a("b775");function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(x["a"])({url:"/api/menu",method:"get",params:{col:t,words:e}})}function S(t){return Object(x["a"])({url:"/api/menu",method:"post",data:t})}function C(t){return Object(x["a"])({url:"/api/menu",method:"put",data:t})}function $(t){return x["a"].delete("/api/menu",{data:{id:t}})}var z={name:"AdminMenu",components:{IconSelect:D,treeSelect:_.a},data:function(){return{query:{words:""},tableLoading:!1,tableData:[],treeData:[{id:0,label:"顶级类目",children:[]}],dialogVisible:!1,dialogAction:"",dialogActionMap:{update:"编辑",create:"新建"},formData:{id:null,type:1,name:null,path:null,component:null,redirect:null,hidden:!1,alwaysShow:!1,title:null,icon:null,noCache:!0,breadcrumb:!0,roles:null,sort:999,pid:0,create_time:null}}},created:function(){this.doRead()},methods:{doRead:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.tableLoading=!0,k(t,e).then(function(t){this.tableData.splice(0,this.tableData.length),this.tableData=t.slice(0)}.bind(this)).catch((function(t){console.log(t)})).finally(function(){this.tableLoading=!1}.bind(this))},handleQuery:function(){if(""===this.query.words)this.doRead();else{var t=g(this.query.words);!0===t?this.doRead("title",this.query.words):this.$notify.error({title:"错误",message:t,duration:2e3})}},preCreate:function(){this.rstFormData(),k(null,null).then(function(t){var e=this;this.treeData[0].children.splice(0,this.treeData[0].children.length),this.treeData[0].children=t.slice(0),this.dialogAction="create",this.dialogVisible=!0,this.$nextTick((function(){e.$refs["form"].clearValidate()}))}.bind(this)).catch((function(t){console.log(t)}))},doCreate:function(){var t=this;this.$refs["form"].validate((function(e){e&&(console.log(t.formData),S(t.formData).then(function(t){this.dialogAction="",this.dialogVisible=!1,this.doRead()}.bind(t)).catch((function(t){console.log(t)})))}))},preUpdate:function(t){r.a.all([k(null,null),k("id",t.id)]).then(r.a.spread(function(t,e){var a=this;this.treeData[0].children.splice(0,this.treeData[0].children.length),this.treeData[0].children=t.slice(0),this.copyFormData(e[0]),this.dialogAction="update",this.dialogVisible=!0,this.$nextTick((function(){a.$refs["form"].clearValidate()}))}.bind(this))).catch((function(t){console.log(t)}))},doUpdate:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a=Object.assign({},t.formData);C(a).then(function(t){this.dialogAction="",this.dialogVisible=!1,this.doRead()}.bind(t)).catch((function(t){console.log(t)}))}}))},doDelete:function(t){var e=this;this.$confirm("确定删除吗？子菜单会同时删除，此操作不能撤销！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){$(t).then(function(t){this.$message({type:"success",message:"删除成功!"}),this.doRead()}.bind(e)).catch((function(t){console.log(t)}))})).catch((function(){}))},selected:function(t){this.formData.icon=t},handleExport:function(){},rstFormData:function(){this.formData.id=null,this.formData.type=1,this.formData.name=null,this.formData.path=null,this.formData.component=null,this.formData.redirect=null,this.formData.hidden=!1,this.formData.alwaysShow=!1,this.formData.title=null,this.formData.icon=null,this.formData.noCache=!0,this.formData.breadcrumb=!0,this.formData.roles=null,this.formData.sort=999,this.formData.pid=0,this.formData.create_time=null},copyFormData:function(t){this.formData.id=t.id,this.formData.type=t.type,this.formData.name=t.name,this.formData.path=t.path,this.formData.component=t.component,this.formData.redirect=t.redirect,this.formData.hidden=t.hidden,this.formData.alwaysShow=t.alwaysShow,this.formData.title=t.title,this.formData.icon=t.icon,this.formData.noCache=t.noCache,this.formData.breadcrumb=t.breadcrumb,this.formData.roles=t.roles,this.formData.sort=t.sort,this.formData.pid=t.pid,this.formData.create_time=t.create_time}}},A=z,L=Object(b["a"])(A,o,i,!1,null,null,null);e["default"]=L.exports},b127:function(t,e,a){},e8c0:function(t,e,a){"use strict";var o=a("b127"),i=a.n(o);i.a}}]);